{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <!-- css cdn -->
    <link rel="stylesheet" type="text/css" href="{% static 'css/styles.css' %}">
    <!-- <link rel="stylesheet" type="text/css" href="{% static 'css/styles.css?v=1.0' %}"> -->

    <style>
       


    </style>
</head>
<body>
    <!-- Header -->
    <header class="navbar sticky-top bg-color flex-md-nowrap p-0 shadow">
        <a class="navbar-brand col-md-3 col-lg-2 me-0 px-3 fs-6 text-white" href="#">Innate Blogger</a>
  
        <ul class="navbar-nav flex-row d-md-none">
            <li class="nav-item text-nowrap ">
                <button class="nav-link px-3 text-white bg-light" type="button" data-bs-toggle="offcanvas" data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon text-light"></span>
                </button>
            </li>
        </ul>
    </header>
    

    <section>
        <div class="container-fluid">
            <!-- sidebar -->
            <div class="row">
                <div class="sidebar border border-right col-md-3 col-lg-2 p-0 bg-sidebar off-content">
                    <div class="offcanvas-md offcanvas-end bg-warining " tabindex="-1" id="sidebarMenu" aria-labelledby="sidebarMenuLabel">
                        <div class="offcanvas-header bg-color">
                            <h5 class="offcanvas-title" id="sidebarMenuLabel">Innate Blogger</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#sidebarMenu" aria-label="Close"></button>
                        </div>
                        <div class="offcanvas-body d-md-flex flex-column p-0 pt-lg-3 overflow-y-auto bg-sidebar" style="height: 100vh;">
                            <ul class="nav flex-column" style="margin-top: 3rem;">
                                <li class="nav-item li">
                                    <a class="nav-link d-flex align-items-center gap-2 actives toggle-link text-light active-link" data-target="Dashboard" href="#">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-kanban-fill text-light " viewBox="0 0 16 16">
                                            <path d="M2.5 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm5 2h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1m-5 1a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1h-1a1 1 0 0 1-1-1zm9-1h1a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-1a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1"/>
                                        </svg>
                                        Dashboard
                                    </a>
                                </li>
                                <li class="nav-item li">
                                    <a class="nav-link d-flex align-items-center gap-2 toggle-link text-light active-link" data-target="addpost" href="#">
                                        <i class="bi bi-plus-lg"></i>
                                        New Post
                                    </a>
                                </li>
                            </ul>
                            <ul class="nav flex-column mb-auto">
                                <li class="nav-item li">
                                    <a class="nav-link d-flex align-items-center gap-2 toggle-link text-light active-link" data-target="view" href="#">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-kanban-fill text-light " viewBox="0 0 16 16">
                                            <path d="M2.5 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm5 2h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1m-5 1a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1h-1a1 1 0 0 1-1-1zm9-1h1a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-1a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1"/>
                                        </svg>
                                        View Post
                                    </a>
                                </li>
                                <li class="nav-item li">
                                    <a class="nav-link d-flex align-items-center gap-2 toggle-link text-light active-link" data-target="section4" href="#">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chat-square-dots-fill text-light" viewBox="0 0 16 16">
                                            <path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.5a1 1 0 0 0-.8.4l-1.9 2.533a1 1 0 0 1-1.6 0L5.3 12.4a1 1 0 0 0-.8-.4H2a2 2 0 0 1-2-2zm5 4a1 1 0 1 0-2 0 1 1 0 0 0 2 0m4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0m3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2"/>
                                        </svg>
                                        Comments
                                    </a>
                                </li>
                                <li class="nav-item li">
                                    <a class="nav-link d-flex align-items-center gap-2 toggle-link text-light" data-target="profile" href="">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-gear-fill text-light" viewBox="0 0 16 16">
                                            <path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"/>
                                        </svg>
                                    Profile Settings
                                    </a>
                                </li>
                            </ul>
            
                            <p class="hr my-5"></p>
            
                            <ul class="nav flex-column mb-5 pb-3">
                                <li class="nav-item li">
                                    <!-- Button trigger modal -->
                                    <button type="button" class="nav-link d-flex align-items-center gap-2 text-light" data-bs-toggle="modal" data-bs-target="#exampleModal">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left-fill text-dark" viewBox="0 0 16 16">
                                            <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0z"/>
                                            <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708z"/>
                                        </svg>
                                        Sign out
                                    </button>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                    <!-- Modal -->
                    <section>
                        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog  modal-dialog-centered">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h1 class="modal-title fs-5" id="exampleModalLabel">Hello, {{ user.username }}.</h1>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        Are you sure you want to log out?
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-danger px-3" data-bs-dismiss="modal">No</button>
                                        <a class=""  href="/logout">
                                            <button type="button" class="btn btn-success px-3">Yes</button>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <div>
                        <!-- Dashboard landing -->
                        <div id="Dashboard" class="section actives">
                            <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                                <div class="d-block">
                                    <!-- <h1 class="h2">Dashboard</h1> -->
                                    {% if user.is_authenticated %}  
                                    <small class="h2">Hello  {{ user.username }}!</small>
                                    <!-- <a href="/signout" class="btn btn-danger">Logout</a> -->
                                    {% endif %}
                                </div>
                                <div class="btn-toolbar mb-2 mb-md-0">
                                    <div class="btn-group me-2">
                                        <button type="button" class="btn btn-sm btn-outline-secondary">Share</button>
                                        <button type="button" class="btn btn-sm btn-outline-secondary">Export</button>
                                    </div>
                                </div>
                            </div>

                            <!-- content -->
                            <div class="container">
                                <div class="shadow p-5">
                                    <div class="row g-4">
                                        <div class="col-4">
                                            <div class=" shadow p-4">
                                                <h4>View Post</h4> 
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div class=" shadow p-4">
                                                <h4>Edit Post</h4> 
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div class=" shadow p-4">
                                                <h4>View Post</h4> 
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div class=" shadow p-4">
                                                <h4>View Post</h4> 
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div class=" shadow p-4">
                                                <h4>View Post</h4> 
                                            </div>
                                        </div>
                                         <div class="col-4">
                                            <div class=" shadow p-4">
                                                <h4>View Post</h4> 
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>

                        <!-- New Post -->
                        <!-- {{form.media}} -->
                        <div id="addpost" class="container section">
                            <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                                <div class="d-block">
                                   <h2>Add post</h2>
                                </div>
                                <div class="btn-toolbar mb-2 mb-md-0">
                                    <div class="btn-group me-2">
                                        <button type="button" class="btn btn-sm btn-outline-secondary">Share</button>
                                        <button type="button" class="btn btn-sm btn-outline-secondary">Export</button>
                                    </div>
                                </div>
                            </div>
                            <!--  -->
                            {% include 'my_app/add_post.html' %}

                            {% block content %}

                            {% endblock %} 
                            <!-- <div class="container mt-4 p-lg-5 p-3 bg-light shadow">
                                <form method="post" action="{% url 'profile' %}" class="">
                                    {% csrf_token %}
                                    {{ form.as_p }}
                                    <button type="submit" value="Publish" class="btn btn-success"><i class="bi bi-cloud-plus-fill pe-2"></i>Publish</button>
                                </form>
                            </div> -->


                        </div>

                        <!-- view posts -->
                        <div id="view" class="container section">
                            <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                                <div class="d-block">
                                   <h2>View posts</h2>
                                </div>
                                <div class="btn-toolbar mb-2 mb-md-0">
                                    <div class="btn-group me-2">
                                        <button type="button" class="btn btn-sm btn-outline-secondary">Share</button>
                                        <button type="button" class="btn btn-sm btn-outline-secondary">Export</button>
                                    </div>
                                </div>
                            </div>
                            <!--  -->
                            <div class="container mt-4 p-lg-5 p-3 bg-light shadow">
                                <table class="table table-striped table-bordered table-sm">  
                                    <thead class="thead-dark">  
                                    <tr>  
                                        <th>Post ID</th>  
                                        <th>Title</th>  
                                        <!-- <th>Content</th>   -->
                                        <th>Created_at</th>  
                                        <th>Actions</th>  
                                    </tr>  
                                    </thead>  
                                    <tbody>  
                                    {% for blog in Posts %}  
                                    <tr>  
                                        <td>{{ blog.id }}</td>  
                                        <td><a href="/update/{{ blog.id }}">{{ blog.title }}</a></td>  
                                        <!-- <td>{{ Post.content }}</td>   -->
                                        <td>{{ blog.created_at }}</td>  
                                        <td>  
                                            <button class="btn btn-success btn-sm">
                                                <a href="/update/{{ blog.id }}" style="text-decoration: none;color: white;"><i class="bi bi-pencil-square pe-2"></i>Edit</a>
                                            </button>  
                                             <!-- Button trigger modal -->
                                            <button type="button" class=" align-items-center gap-2 btn btn-danger btn-sm" data-bs-toggle="modal" data-bs-target="#exampleModal">
                                                <a href="/delete_post/{{blog.id}}" class="nav-link"><i class="bi bi-trash3-fill pe-2"></i>Delete</a>
                                            </button>
                                        </td> 
                                    </tr>  
                                    {% endfor %}  
                                    </tbody>  
                                </table> 
                                <div class="text-end mt-4">
                                    <a href="{%url 'add_post'%}" class="btn btn-primary"><i class="bi bi-plus-lg pe-2"></i>Add New Record</a>
                                </div>
                                <!-- Modal -->
                                <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                    <div class="modal-dialog  modal-dialog-centered">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h1 class="modal-title fs-5" id="exampleModalLabel">Hello, Admin</h1>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                            </div>
                                            <div class="modal-body">
                                                Are you sure you want to delete
                                                {% for blog in Posts %} 
                                                {{ blog.id }}
                                                {%endfor%}
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-danger px-3" data-bs-dismiss="modal">No</button>
                                                    <a class=""  href="/logout">
                                                        <button type="button" class="btn btn-success px-3">Yes</button>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div> 
                            </div>
                        </div>

                        <!-- profile settings -->
                        <div id="profile" class="container section">
                            <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                                <div class="d-block">
                                   <h2>Profile Settings</h2>
                                </div>
                                <div class="btn-toolbar mb-2 mb-md-0">
                                    <div class="btn-group me-2">
                                        <button type="button" class="btn btn-sm btn-outline-secondary">Share</button>
                                        <button type="button" class="btn btn-sm btn-outline-secondary">Export</button>
                                    </div>
                                </div>
                            </div>

                            <!--  -->
                            <div class="container mt-4 p-lg-5 p-3 bg-light shadow">
                                <form action="">
                                    <div class="row">
                                        <div class="col-lg-6 col-12">
                                            <label for="firstname">First Name:</label>
                                            <input type="text" id="firstname" class="form-control p-4" placeholder="Enter first name">
                                        </div>
                                        
                                        <div class="col-lg-6 col-12">
                                            <label for="lastname">Last Name:</label>
                                            <input type="text" id="lastname" class="form-control p-4" placeholder="Enter last name">
                                        </div>
                                    </div>

                                    <div>
                                        <label for="bio">Bio</label>
                                        <textarea name="bio" id="bio" cols="30" rows="5" class="form-control"></textarea>
                                    </div>

                                    <div class="mt-3">
                                        <label for="">Profile Picture</label>
                                        <input type="file" class="form-control">
                                    </div>
                                    <button class="btn btn-color mt-4 form-control">Update</button>
                                </form>
                            </div>
                        </div>
                    </div>

                </main>
            </div>
        </div>
    </section>
    <!-- bootstrap cdn -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script> 
    <script>
        document.addEventListener('DOMContentLoaded', () => {
        const links = document.querySelectorAll('.toggle-link');
        const sections = document.querySelectorAll('.section');

        // Function to show the section based on the target ID
        function showSection(targetId) {
            sections.forEach(section => {
                if (section.id === targetId) {
                    section.classList.add('actives');
                } else {
                    section.classList.remove('actives');
                }
            });

            // Update navigation link colors based on the active section
            links.forEach(link => {
                const linkTargetId = link.getAttribute('data-target');
                if (linkTargetId === targetId) {
                    link.classList.add('active-link');  // Add active class
                } else {
                    link.classList.remove('active-link');  // Remove active class
                }
            });
        }

        // Retrieve last visited section from local storage
        const lastVisitedSection = localStorage.getItem('lastVisitedSection');
        if (lastVisitedSection) {
            showSection(lastVisitedSection);
        } else {
            // Default to the first section if no previous section is stored
            showSection(links[0].getAttribute('data-target'));
        }

        links.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const targetId = link.getAttribute('data-target');
                showSection(targetId);
                // Store the current section in local storage
                localStorage.setItem('lastVisitedSection', targetId);
            });
        });
        });

        document.addEventListener('DOMContentLoaded', function() {
        console.log('JavaScript file loaded successfully');
        });


    </script>
</body>
</html>